# ポモドーロタイマーWebアプリケーション アーキテクチャ案

## 1. 概要

Flask（Python）＋HTML/CSS/JavaScriptで構築するポモドーロタイマーWebアプリの設計方針をまとめます。

---

## 2. 構成

### バックエンド（Flask）
- タイマー進捗データのAPI提供
- 静的ファイル（HTML/CSS/JS）の配信
- 必要に応じてセッション/DBで進捗管理
- ルーティングとロジックを分離し、テスト容易性を高める
- 依存性注入（DI）でDBやファイルアクセスを抽象化

### フロントエンド（HTML/CSS/JavaScript）
- タイマーUI（円形プログレスバー、開始・リセットボタン）
- 進捗表示（完了数・集中時間）
- タイマー制御（JSでカウントダウン、状態管理）
- API通信（進捗取得・記録）
- ロジックとUI操作を分離し、関数単位でテスト可能に

---

## 3. ディレクトリ構成例

```
/pomodoro_app/
  ├─ static/
  │    ├─ css/
  │    ├─ js/
  │    └─ images/
  ├─ templates/
  │    └─ index.html
  ├─ app.py
  └─ models.py（進捗管理用/必要なら）
```

---

## 4. API設計

- `/` : メイン画面（index.htmlを表示）
- `/api/progress` : 今日の進捗データ取得（GET）
- `/api/progress` : 進捗記録（POST, タイマー完了時）

APIレスポンスは常にJSONで統一し、エラー時も明確な構造にする。

---

## 5. ユニットテスト容易性の工夫

- ロジックとルーティング・UI操作の分離
- 依存性注入でDB/ファイルアクセスを抽象化
- テスト用DB/ファイルの利用
- API通信部分のラッパー化・モック化
- 単一責任原則（SRP）を守り、関数・クラスを小さく分割
- CI/CDで自動テスト実行（pytest, Jest等）

---

## 6. その他設計ポイント

- 状態管理は基本フロント（JS）で、進捗のみサーバー連携
- UIはモック画像を忠実に再現（色・レイアウト・フォント）
- RESTfulでシンプルなAPI設計
- 必要ならユーザーごとにセッション管理

---

この設計により、拡張性・保守性・テスト容易性の高いポモドーロタイマーWebアプリを構築できます。
